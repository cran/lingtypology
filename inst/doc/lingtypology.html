<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="George Moroz" />

<meta name="date" content="2017-11-30" />

<title>lingtypology: easy mapping for Linguistic Typology</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore"><code>lingtypology</code>: easy mapping for Linguistic Typology</h1>
<h4 class="author"><em>George Moroz</em></h4>
<h4 class="date"><em>2017-11-30</em></h4>



<div id="what-is-lingtypology" class="section level2">
<h2>What is <code>lingtypology</code>?</h2>
<p>The <code>lingtypology</code> package connects R with the <a href="http://glottolog.org/">Glottolog database (v. 2.7)</a> and provides an additional functionality for linguistic typology. The Glottolog database contains a catalogue of the world’s languages. This package helps researchers to make linguistic maps, using the philosophy of <a href="http://clld.org/">the Cross-Linguistic Linked Data project</a>, which is creating a uniform access to linguistic data across publications. This package is based on the <a href="https://rstudio.github.io/leaflet/">leaflet package</a>, so <code>lingtypology</code> is a package for interactive linguistic mapping. In addition, the package provides an ability to download data from typological databases such as WALS, AUTOTYP and others (see section 4).I would like to thank Natalya Tyshkevich, Samira Verhees and Eugenya Klyagina for reading and correcting some versions of this vignette.</p>
</div>
<div id="installation" class="section level2">
<h2>1. Installation</h2>
<p>Since <code>lingtypology</code> is an R package, you should install <a href="https://www.r-project.org/">R (version &gt;= 3.1.0)</a> on your PC if you haven’t already done so. To install the <code>lingtypology</code> package, run the following command at your R IDE, so you get the stable version from CRAN:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;lingtypology&quot;</span>, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>You can also get the development version from GitHub:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)
devtools::<span class="kw">install_github</span>(<span class="st">&quot;ropensci/lingtypology&quot;</span>)</code></pre></div>
<p>Sometimes installation fails because of the absence of the package <code>crosstalk</code> or any other. Just install it using command <code>install.packages(&quot;crosstalk&quot;)</code>.</p>
<p>Load the package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lingtypology)</code></pre></div>
</div>
<div id="glottolog-functions" class="section level2">
<h2>2. Glottolog functions</h2>
<p>This package is based on the <a href="http://glottolog.org/">Glottolog database (v. 2.7)</a>, so <code>lingtypology</code> has several functions for accessing data from that database.</p>
<div id="command-names-syntax" class="section level3">
<h3>2.1 Command name’s syntax</h3>
<p>Most of the functions in <code>lingtypology</code> have the same syntax: <strong>what you need.what you have</strong>. Most of them are based on <em>language name</em>.</p>
<ul>
<li><strong>aff.lang()</strong> — get affiliation by language</li>
<li><strong>area.lang()</strong> — get macro area by language</li>
<li><strong>country.lang()</strong> — get country by language</li>
<li><strong>iso.lang()</strong> — get ISO 639-3 code by language</li>
<li><strong>gltc.lang()</strong> — get glottocode (identifier for a language in the Glottolog database) code by language</li>
<li><strong>lat.lang()</strong> — get latitude by language</li>
<li><strong>long.lang()</strong> — get longitude by language</li>
</ul>
<p>Some of them help to define a vector of languages.</p>
<ul>
<li><strong>lang.aff()</strong> — get language by affiliation</li>
<li><strong>lang.iso()</strong> — get language by ISO 639-3 code</li>
<li><strong>lang.gltc()</strong> — get language by glottocode</li>
</ul>
<p>Additionally there are some functions to convert glottocodes to ISO 639-3 codes and vice versa:</p>
<ul>
<li><strong>gltc.iso()</strong> — get glottocode by ISO 639-3 code</li>
<li><strong>iso.gltc()</strong> — get ISO 639-3 code by glottocode</li>
</ul>
<p>The most important functionality of <code>lingtypology</code> is the ability to create interactive maps based on features and sets of languages (see the third section):</p>
<ul>
<li><strong>map.feature()</strong></li>
</ul>
<p><a href="http://glottolog.org/">Glottolog database (v. 2.7)</a> provides <code>lingtypology</code> with language names, ISO codes, genealogical affiliation, macro area, countries, coordinates, and much information. This set of functions doesn’t have a goal to cover all possible combinations of functions. Check out additional information that is preserved in the version of the Glottolog database used in <code>lingtypology</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(glottolog.original)</code></pre></div>
<pre><code>##  [1] &quot;language&quot;           &quot;iso&quot;                &quot;glottocode&quot;        
##  [4] &quot;longitude&quot;          &quot;latitude&quot;           &quot;affiliation&quot;       
##  [7] &quot;area&quot;               &quot;alternate names&quot;    &quot;affiliation-HH&quot;    
## [10] &quot;country&quot;            &quot;dialects&quot;           &quot;language status&quot;   
## [13] &quot;language use&quot;       &quot;location&quot;           &quot;population numeric&quot;
## [16] &quot;typology&quot;           &quot;writing&quot;</code></pre>
<p>Using R functions for data manipulation you can create your own database for your purpose.</p>
</div>
<div id="using-base-functions" class="section level3">
<h3>2.2 Using base functions</h3>
<p>All functions introduced in the previous section are regular functions, so they can take the following objects as input:</p>
<ul>
<li>a regular string</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">iso.lang</span>(<span class="st">&quot;Adyghe&quot;</span>)</code></pre></div>
<pre><code>## Adyghe 
##  &quot;ady&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lang.iso</span>(<span class="st">&quot;ady&quot;</span>)</code></pre></div>
<pre><code>##      ady 
## &quot;Adyghe&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">country.lang</span>(<span class="st">&quot;Adyghe&quot;</span>)</code></pre></div>
<pre><code>##                                                                                                                  Adyghe 
## &quot;Turkey, United States, Israel, Australia, Egypt, Macedonia, France, Russia, Netherlands, Germany, Syria, Jordan, Iraq&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lang.aff</span>(<span class="st">&quot;West Caucasian&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Adyghe&quot;    &quot;Abkhaz&quot;    &quot;Abaza&quot;     &quot;Ubykh&quot;     &quot;Kabardian&quot;</code></pre>
<p>I would like to point out that you can create strings in R using single or double quotes. Since inserting single quotes in a string created with single quotes causes an error in R, I use double quotes in my tutorial. You can use single quotes, but be careful and remember that <code>'Ma'ya'</code> is an incorrect string in R.</p>
<ul>
<li>a vector of strings</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">area.lang</span>(<span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Aduge&quot;</span>))</code></pre></div>
<pre><code>##    Adyghe     Aduge 
## &quot;Eurasia&quot;  &quot;Africa&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lang &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Russian&quot;</span>)
<span class="kw">aff.lang</span>(lang)</code></pre></div>
<pre><code>##                                        Adyghe 
## &quot;North Caucasian, West Caucasian, Circassian&quot; 
##                                       Russian 
##                 &quot;Indo-European, Slavic, East&quot;</code></pre>
<ul>
<li>other functions. For example, let’s try to get a vector of ISO codes for the Circassian languages</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">iso.lang</span>(<span class="kw">lang.aff</span>(<span class="st">&quot;Circassian&quot;</span>))</code></pre></div>
<pre><code>##    Adyghe Kabardian 
##     &quot;ady&quot;     &quot;kbd&quot;</code></pre>
<p>If you are new to R, it is important to mention that you can create a table with languages, features and other parametres with any spreadsheet software you used to work. Then you can import the created file to R using standard tools.</p>
<p>The behavior of most functions is rather predictable, but the function <code>country.lang</code> has an additional feature. By default this function takes a vector of languages and returns a vector of countries. But if you set the argument <code>intersection = TRUE</code>, then the function returns a vector of countries where all languages from the query are spoken.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">country.lang</span>(<span class="kw">c</span>(<span class="st">&quot;Udi&quot;</span>, <span class="st">&quot;Laz&quot;</span>))</code></pre></div>
<pre><code>##                                                        Udi 
##                &quot;Russia, Georgia, Azerbaijan, Turkmenistan&quot; 
##                                                        Laz 
## &quot;Turkey, Georgia, France, United States, Germany, Belgium&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">country.lang</span>(<span class="kw">c</span>(<span class="st">&quot;Udi&quot;</span>, <span class="st">&quot;Laz&quot;</span>), <span class="dt">intersection =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] &quot;Georgia&quot;</code></pre>
</div>
<div id="spell-checker-look-carefully-at-warnings" class="section level3">
<h3>2.3 Spell Checker: look carefully at warnings!</h3>
<p>There are some functions that take country names as input. Unfortunately, some countries have alternative names. In order to save users the trouble of having to figure out the exact name stored in the database (for example <em>Ivory Coast</em> or <em>Cote d’Ivoire</em>), all official country names and standard abbreviations are stored in the database:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lang.country</span>(<span class="st">&quot;Cape Verde&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Kabuverdianu&quot; &quot;Portuguese&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lang.country</span>(<span class="st">&quot;Cabo Verde&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Kabuverdianu&quot; &quot;Portuguese&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">lang.country</span>(<span class="st">&quot;USA&quot;</span>))</code></pre></div>
<pre><code>## [1] &quot;Holikachuk&quot;       &quot;Hopi&quot;             &quot;Palewyami Yokuts&quot;
## [4] &quot;Finnish&quot;          &quot;Mbum&quot;             &quot;Lower Sorbian&quot;</code></pre>
<p>All functions which take a vector of languages are enriched with a kind of a spell checker. If a language from a query is absent in the database, functions return a warning message containing a set of candidates with the minimal Levenshtein distance to the language from the query.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aff.lang</span>(<span class="st">&quot;Adyge&quot;</span>)</code></pre></div>
<pre><code>## Warning: Language Adyge is absent in our version of the Glottolog database.
## Did you mean Adyghe, Aduge?</code></pre>
<pre><code>## Adyge 
##    NA</code></pre>
</div>
<div id="changes-in-the-glottolog-database" class="section level3">
<h3>2.4 Changes in the glottolog database</h3>
<p>Unfortunately, the <a href="http://glottolog.org/">Glottolog database (v. 2.7)</a> is not perfect for all my tasks, so I changed it a little bit:</p>
<ul>
<li>Added some Dargwa languages: Chirag, Cudaxar, Itsari, Kajtak, Kubachi, Tanti, Mehweb. Dargwa is still present in the database as an individual language, so one can use Dargwa or any Dargwa language listed above. (07.09.2016)</li>
<li>Added coordinates to Silesian and Slavomolisano (11.09.2016)</li>
<li>Abkhazian is changed to Abkhaz. Abkhaz, Abaza, Georgian, Ossetian, Archi, Avar and Ingush coordinates are changed. (22.01.2017)</li>
<li>Northeast Sahaptin is changed to Walla Walla. Northwest Sahaptin is changed to Yakima. Central Guerrero Nahuatl is renamed Guerrero Nahuatl (thanks to Timo Roettger for mentioning that problems). (02.02.2017)</li>
<li>Some sign language changed. Thanks to <a href="https://borstell.github.io/#name">Calle Börstell</a> for data. (02.02.2017)</li>
<li>Bininj Gun-Wok changed to Gunwinggu (thanks to Timo Roettger) (06.02.2017)</li>
<li>Country name Viet Nam changed to Vietnam. Madagascar and Togo added to countries set. (11.02.2017)</li>
<li>country names are unified. Area affiliation changed: for International Sign to Eurasia; for Hawai’i Pidgin Sign Language to Papua; for Hawai’i Creole English to Papua; for Kalaallisut to North America.</li>
<li>Estonian, Nuu-chah-nulth, Loup A and Obdorsk Khanty coordinates are added. (28.04.2017)</li>
<li>Language duplicates renamed: Voro (Niger-Congo), Voro (Uralic), Ache (Tupian), Ache (Sino-Tibetan), Karipuna (Panoan), Karipuna (Tupian), Calo (Spurious), Calo (Mixed language), Wara (Niger-Congo), Wara (South-Central Papuan), Saliba (Austronesian), Saliba (Salivan), Bari (Nilo-Saharan), Bari (Chibchan) (30.04.2017)</li>
<li>Lezghian changed to Lezgian (31.05.2017)</li>
</ul>
<p>More detailed information about how our database was created can be seen from <a href="https://github.com/ropensci/lingtypology/tree/master/database_creation">GitHub folder</a>.</p>
<p>After <a href="https://github.com/ropensci/lingtypology/issues/1">Robert Forkel’s issue</a> I decided to add an argument <code>glottolog.source</code>, so that everybody has access to “original” and “modified” (by default) glottolog versions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.glottolog</span>(<span class="kw">c</span>(<span class="st">&quot;Abkhaz&quot;</span>, <span class="st">&quot;Abkhazian&quot;</span>), <span class="dt">glottolog.source =</span> <span class="st">&quot;original&quot;</span>)</code></pre></div>
<pre><code>## [1] FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.glottolog</span>(<span class="kw">c</span>(<span class="st">&quot;Abkhaz&quot;</span>, <span class="st">&quot;Abkhazian&quot;</span>), <span class="dt">glottolog.source =</span> <span class="st">&quot;modified&quot;</span>)</code></pre></div>
<pre><code>## [1]  TRUE FALSE</code></pre>
<p>It is common practice in R to reduce both function arguments and its values, so this can also be done with the following <code>lingtypology</code> functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.glottolog</span>(<span class="kw">c</span>(<span class="st">&quot;Abkhaz&quot;</span>, <span class="st">&quot;Abkhazian&quot;</span>), <span class="dt">g =</span> <span class="st">&quot;o&quot;</span>)</code></pre></div>
<pre><code>## [1] FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.glottolog</span>(<span class="kw">c</span>(<span class="st">&quot;Abkhaz&quot;</span>, <span class="st">&quot;Abkhazian&quot;</span>), <span class="dt">g =</span> <span class="st">&quot;m&quot;</span>)</code></pre></div>
<pre><code>## [1]  TRUE FALSE</code></pre>
</div>
</div>
<div id="map-features-with-map.feature" class="section level2">
<h2>3. Map features with <code>map.feature</code></h2>
<div id="base-map" class="section level3">
<h3>3.1 Base map</h3>
<p>The most important part of the <code>lingtypology</code> package is the function <code>map.feature</code>. This function allows you to produce maps similar to known projects within <a href="http://clld.org/">the Cross-Linguistic Linked Data philosophy</a>, such as <a href="http://wals.info/">WALS</a> and <a href="http://glottolog.org/">Glottolog</a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Russian&quot;</span>, <span class="st">&quot;Bulgarian&quot;</span>))</code></pre></div>
<p>As shown in the picture above, this function generates an interactive Leaflet map. All specific points on the map have a pop-up box that appears when markers are clicked (see section 3.3 for more information about editing pop-up boxes). By default, they contain language names linked to the glottolog site.</p>
<p>If for some reasons you are not using RStudio or you want to automatically create and save a lot of maps, you can save a map to a variable and use the <code>htmlwidgets</code> package for saving created maps to an .html file. I would like to thank Timo Roettger for mentioning this problem.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Korean&quot;</span>))
<span class="co"># install.packages(&quot;htmlwidgets&quot;)</span>
<span class="kw">library</span>(htmlwidgets)
<span class="kw">saveWidget</span>(m, <span class="dt">file=</span><span class="st">&quot;TYPE_FILE_PATH/m.html&quot;</span>)</code></pre></div>
<p>There is an export button in RStudio, but for some reason it is not so easy to save a map as a .png or .jpg file using code. <a href="http://stackoverflow.com/a/34672309/6056442">Here</a> is a possible solution.</p>
</div>
<div id="set-features" class="section level3">
<h3>3.2 Set features</h3>
<p>The goal of this package is to allow typologists (or any other linguists) to map language features. A list of languages and correspondent features can be stored in a <code>data.frame</code> as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">language =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Russian&quot;</span>, <span class="st">&quot;Bulgarian&quot;</span>),
                 <span class="dt">features =</span> <span class="kw">c</span>(<span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;fusional&quot;</span>, <span class="st">&quot;fusional&quot;</span>, <span class="st">&quot;fusional&quot;</span>))
df</code></pre></div>
<pre><code>##    language      features
## 1    Adyghe polysynthetic
## 2 Kabardian polysynthetic
## 3    Polish      fusional
## 4   Russian      fusional
## 5 Bulgarian      fusional</code></pre>
<p>Now we can draw a map:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="dt">languages =</span> df$language,
            <span class="dt">features =</span> df$features)</code></pre></div>
<p>If you have a lot of features and they appear in the legend in a senseless order (by default it is ordered alphabetically), you can reorder them using factors (a vector with ordered levels, for more information see <code>?factor</code>). For example, I want the feature polysynthetic to be listed first, followed by fusional:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$features &lt;-<span class="st"> </span><span class="kw">factor</span>(df$features, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;fusional&quot;</span>))
<span class="kw">map.feature</span>(<span class="dt">languages =</span> df$language, <span class="dt">features =</span> df$features)</code></pre></div>
<p>Like in most R functions, it is not necessary to name all arguments, so the same result can be obtained by:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(df$language, df$features)</code></pre></div>
<p>As shown in the picture above, all points are grouped by feature, colored and counted. As before, a pop-up box appears when markers are clicked. A control feature allows users to toggle the visibility of points grouped by feature.</p>
<p>There are several types of variables in R and <code>map.feature</code> works differently depending on the variable type. I will use a build in data set <code>ejective_and_n_consonants</code> that contains 19 languages from <a href="http://www.lapsyd.ddl.ish-lyon.cnrs.fr/lapsyd/">UPSyD database</a>. This dataset have three variables: the categorical variable <code>ejectives</code> indicates whether some language has any ejective sound, numeric variables <code>consonants</code> and <code>vowels</code> that contains information about the number of consonants and vowels (based on UPSyD database). We can create two maps with categorical variable and with numeric variable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(ejective_and_n_consonants$language,
            ejective_and_n_consonants$ejectives) <span class="co"># categorical</span>
<span class="kw">map.feature</span>(ejective_and_n_consonants$language,
            ejective_and_n_consonants$consonants) <span class="co"># numeric</span></code></pre></div>
<p>Default colors are not perfect for this goal, but the main point is clear. For creating a correct map, you should correctly define the type of the variable.</p>
<p>This dataset also can be used to show one other parameter of the <code>map.feature</code> function. There are two possible ways to show the World map: with the Atlantic sea or with the Pacific sea in the middle. If you don’t need default Pacific view use the <code>map.orientation</code> parameter (thanks <span class="citation">@languageSpaceLabs</span> and <span class="citation">@tzakharko</span> for that idea):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(ejective_and_n_consonants$language,
            ejective_and_n_consonants$consonants,
            <span class="dt">map.orientation =</span> <span class="st">&quot;Atlantic&quot;</span>)</code></pre></div>
</div>
<div id="set-pop-up-boxes" class="section level3">
<h3>3.3 Set pop-up boxes</h3>
<p>Sometimes it is a good idea to add some additional information (e.g. language affiliation, references or even examples) to pop-up boxes that appear when points are clicked. In order to do so, first of all we need to create an extra vector of strings in our dataframe:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$popup &lt;-<span class="st"> </span><span class="kw">aff.lang</span>(df$language)</code></pre></div>
<p>The function <code>aff.lang()</code> creates a vector of genealogical affiliations that can be easily mapped:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="dt">languages =</span> df$language, <span class="dt">features =</span> df$features, <span class="dt">popup =</span> df$popup)</code></pre></div>
<p>Pop-up strings can contain HTML tags, so it is easy to insert a link, a couple of lines, a table or even a video and sound. Here is how pop-up boxes can demonstrate language examples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># change a df$popup vector</span>
df$popup &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">&quot;sɐ s-ɐ-k'ʷɐ&lt;br&gt; 1sg 1sg.abs-dyn-go&lt;br&gt;'I go'&quot;</span>,
               <span class="st">&quot;sɐ s-o-k'ʷɐ&lt;br&gt; 1sg 1sg.abs-dyn-go&lt;br&gt;'I go'&quot;</span>,
               <span class="st">&quot;id-ę&lt;br&gt; go-1sg.npst&lt;br&gt; 'I go'&quot;</span>,
               <span class="st">&quot;ya id-u&lt;br&gt; 1sg go-1sg.npst &lt;br&gt; 'I go'&quot;</span>,
               <span class="st">&quot;id-a&lt;br&gt; go-1sg.prs&lt;br&gt; 'I go'&quot;</span>)
<span class="co"># create a map</span>

<span class="kw">map.feature</span>(df$language,
            <span class="dt">features =</span> df$features,
            <span class="dt">popup =</span> df$popup)</code></pre></div>
<p>How to say <em>moon</em> in Sign Languages? Here is an example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a dataframe with links to video</span>
sign_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">languages =</span> <span class="kw">c</span>(<span class="st">&quot;American Sign Language&quot;</span>, <span class="st">&quot;Russian Sign Language&quot;</span>, <span class="st">&quot;French Sign Language&quot;</span>),
                 <span class="dt">popup =</span> <span class="kw">c</span>(<span class="st">&quot;https://media.spreadthesign.com/video/mp4/13/48600.mp4&quot;</span>, <span class="st">&quot;https://media.spreadthesign.com/video/mp4/12/17639.mp4&quot;</span>, <span class="st">&quot;https://media.spreadthesign.com/video/mp4/10/17638.mp4&quot;</span>))

<span class="co"># Change popup to an HTML code</span>
sign_df$popup &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;&lt;video width='200' height='150' controls&gt; &lt;source src='&quot;</span>,
                  <span class="kw">as.character</span>(sign_df$popup),
                  <span class="st">&quot;' type='video/mp4'&gt;&lt;/video&gt;&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)
<span class="co"># create a map</span>
<span class="kw">map.feature</span>(<span class="dt">languages =</span> sign_df$languages, <span class="dt">popup =</span> sign_df$popup)</code></pre></div>
</div>
<div id="set-labels" class="section level3">
<h3>3.4 Set labels</h3>
<p>An alternative way to add some short text to a map is to use the <code>label</code> option.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(df$language, df$features,
            <span class="dt">label =</span> df$language)</code></pre></div>
<p>There are some additional arguments for customization: <code>label.fsize</code> for setting font size, <code>label.position</code> for controlling the label position, and <code>label.hide</code> to control the appearance of the label: if <code>TRUE</code>, the labels are displayed on mouse over (as on the previous map), if <code>FALSE</code>, the labels are always displayed (as on the next map).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(df$language, df$features,
            <span class="dt">label =</span> df$language,
            <span class="dt">label.fsize =</span> <span class="dv">20</span>,
            <span class="dt">label.position =</span> <span class="st">&quot;left&quot;</span>,
            <span class="dt">label.hide =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>There is an additional tool for emphasis of some points on the map. The argument <code>label.emphasize</code> allows to emphasize selected points with the color specified by a user.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(df$language, df$features,
            <span class="dt">label =</span> df$language,
            <span class="dt">label.fsize =</span> <span class="dv">20</span>,
            <span class="dt">label.position =</span> <span class="st">&quot;left&quot;</span>,
            <span class="dt">label.hide =</span> <span class="ot">FALSE</span>,
            <span class="dt">label.emphasize =</span> <span class="kw">list</span>(<span class="dv">2</span>:<span class="dv">4</span>, <span class="st">&quot;red&quot;</span>))</code></pre></div>
<p>In this example the first vector of the list in the <code>label.emphasize</code> argument is vector <code>2:4</code> that produce elements <code>2</code>, <code>3</code> and <code>4</code>. You can create your own selected rows. e. g. <code>c(1, 3, 4)</code>. The second vector of the list is the string with a color.</p>
</div>
<div id="set-coordinates" class="section level3">
<h3>3.5 Set coordinates</h3>
<p>You can set your own coordinates using the arguments <code>latitude</code> and <code>longitude</code>. It is important to note, that <code>lingtypology</code> works only with decimal degrees (something like this: 0.1), not with degrees, minutes and seconds (something like this: 0° 06′ 0″). I will illustrate this with the dataset <code>circassian</code> built into the <code>lingtypology</code> package. This dataset comes from fieldwork collected during several expeditions in the period 2011-2016 and contains a list of Circassian villages:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="dt">languages =</span> circassian$language,
            <span class="dt">features =</span> circassian$dialect,
            <span class="dt">popup =</span> circassian$village,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">longitude =</span> circassian$longitude)</code></pre></div>
</div>
<div id="set-colors" class="section level3">
<h3>3.6 Set colors</h3>
<p>By default the color palette is created by the <code>rainbow()</code> function, but you can set your own colors using the argument <code>color</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">language =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Russian&quot;</span>, <span class="st">&quot;Bulgarian&quot;</span>),
                 <span class="dt">features =</span> <span class="kw">c</span>(<span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;fusional&quot;</span>, <span class="st">&quot;fusional&quot;</span>, <span class="st">&quot;fusional&quot;</span>))
<span class="kw">map.feature</span>(<span class="dt">languages =</span> df$language,
            <span class="dt">features =</span> df$features,
            <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">&quot;yellowgreen&quot;</span>, <span class="st">&quot;navy&quot;</span>))</code></pre></div>
<p>Arguments from <a href="https://CRAN.R-project.org/package=RColorBrewer">RColorBrewer</a> or <a href="https://CRAN.R-project.org/package=viridis">viridis</a> also can be used as a color argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(ejective_and_n_consonants$language,
            ejective_and_n_consonants$consonants,
            <span class="dt">color =</span> <span class="st">&quot;magma&quot;</span>)</code></pre></div>
</div>
<div id="set-control-box" class="section level3">
<h3>3.7 Set control box</h3>
<p>The package can generate a control box that allows users to toggle the visibility of points and features. To enable it, there is an argument <code>control</code> in the <code>map.feature</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="dt">languages =</span> df$language,
            <span class="dt">features =</span> df$features,
            <span class="dt">control =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="set-an-additional-set-of-features-using-strokes" class="section level3">
<h3>3.8 Set an additional set of features using strokes</h3>
<p>The <code>map.feature</code> function has an additional argument <code>stroke.features</code>. Using this argument it becomes possible to show two independent sets of features on one map. By default strokes are colored in grey (so for two levels it will be black and white, for three — black, grey, white end so on), but you can set your own colors using the argument <code>stroke.color</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$dialect,
            <span class="dt">stroke.features =</span> circassian$language,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">longitude =</span> circassian$longitude)</code></pre></div>
<p>It is important to note that <code>stroke.features</code> can work with <code>NA</code> values. The function won’t plot anything if there is an <code>NA</code> value. Let’s set a language value to <code>NA</code> in all Baksan villages from the <code>circassian</code> dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create newfeature variable</span>
newfeature &lt;-<span class="st"> </span>circassian[,<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">6</span>)]
<span class="co"># set language feature of the Baksan villages to NA and reduce newfeature from dataframe to vector</span>
newfeature &lt;-<span class="st">  </span><span class="kw">replace</span>(newfeature$language, newfeature$language ==<span class="st"> &quot;Baksan&quot;</span>, <span class="ot">NA</span>)
<span class="co"># create a map</span>

<span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$dialect,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">stroke.features =</span> newfeature)</code></pre></div>
</div>
<div id="set-radii-and-an-opacity-feature" class="section level3">
<h3>3.9 Set radii and an opacity feature</h3>
<p>All markers have their own radius and opacity, so you can set it. Just use the arguments <code>radius</code>, <code>stroke.radius</code>, <code>opacity</code> and <code>stroke.opacity</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$dialect,
            <span class="dt">stroke.features =</span> circassian$language,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">width =</span> <span class="dv">7</span>, <span class="dt">stroke.radius =</span> <span class="dv">13</span>)


<span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$dialect,
            <span class="dt">stroke.features =</span> circassian$language,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">opacity =</span> <span class="fl">0.7</span>, <span class="dt">stroke.opacity =</span> <span class="fl">0.6</span>)</code></pre></div>
</div>
<div id="customizing-legends" class="section level3">
<h3>3.10 Customizing legends</h3>
<p>By default the legend appears in the bottom left corner. If there are stroke features, two legends are generated. There are additional arguments that control the appearence and the title of the legends.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$dialect,
            <span class="dt">stroke.features =</span> circassian$language,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">legend =</span> <span class="ot">FALSE</span>, <span class="dt">stroke.legend =</span> <span class="ot">TRUE</span>)

<span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$dialect,
            <span class="dt">stroke.features =</span> circassian$language,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">title =</span> <span class="st">&quot;Circassian dialects&quot;</span>, <span class="dt">stroke.title =</span> <span class="st">&quot;Languages&quot;</span>)</code></pre></div>
<p>The arguments <code>legend.position</code> and <code>stroke.legend.position</code> allow you to change a legend’s position using “topright”, “bottomright”, “bottomleft” or “topleft” strings.</p>
</div>
<div id="set-scale-bar" class="section level3">
<h3>3.11 Set scale bar</h3>
<p>A scale bar is automatically added to a map, but you can control its appearance (set <code>scale.bar</code> argument to <code>TRUE</code> or <code>FALSE</code>) and its position (use <code>scale.bar.position</code> argument values “topright”, “bottomright”, “bottomleft” or “topleft”).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Russian&quot;</span>),
            <span class="dt">scale.bar =</span> <span class="ot">TRUE</span>,
            <span class="dt">scale.bar.position =</span> <span class="st">&quot;topright&quot;</span>)</code></pre></div>
</div>
<div id="set-layouts" class="section level3">
<h3>3.12 Set layouts</h3>
<p>It is possible to use different tiles on the same map using the <code>tile</code> argument. For more tiles see <a href="https://leaflet-extras.github.io/leaflet-providers/preview/index.html">here</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">lang =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Russian&quot;</span>, <span class="st">&quot;Bulgarian&quot;</span>),
   <span class="dt">feature =</span> <span class="kw">c</span>(<span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;fusion&quot;</span>, <span class="st">&quot;fusion&quot;</span>, <span class="st">&quot;fusion&quot;</span>),
   <span class="dt">popup =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Slavic&quot;</span>, <span class="st">&quot;Slavic&quot;</span>, <span class="st">&quot;Slavic&quot;</span>))

<span class="kw">map.feature</span>(df$lang, df$feature, df$popup,
            <span class="dt">tile =</span> <span class="st">&quot;Thunderforest.OpenCycleMap&quot;</span>)</code></pre></div>
<p>It is possible to use different map tiles on the same map. Just add a vector with tiles.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">lang =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Russian&quot;</span>, <span class="st">&quot;Bulgarian&quot;</span>),
                 <span class="dt">feature =</span> <span class="kw">c</span>(<span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;fusion&quot;</span>, <span class="st">&quot;fusion&quot;</span>, <span class="st">&quot;fusion&quot;</span>),
                 <span class="dt">popup =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Slavic&quot;</span>, <span class="st">&quot;Slavic&quot;</span>, <span class="st">&quot;Slavic&quot;</span>))

<span class="kw">map.feature</span>(df$lang, df$feature, df$popup,
            <span class="dt">tile =</span> <span class="kw">c</span>(<span class="st">&quot;OpenStreetMap.BlackAndWhite&quot;</span>, <span class="st">&quot;Thunderforest.OpenCycleMap&quot;</span>))</code></pre></div>
<p>It is possible to name tiles using the <code>tile.name</code> argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">lang =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Russian&quot;</span>, <span class="st">&quot;Bulgarian&quot;</span>),
                 <span class="dt">feature =</span> <span class="kw">c</span>(<span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;fusion&quot;</span>, <span class="st">&quot;fusion&quot;</span>, <span class="st">&quot;fusion&quot;</span>),
                 <span class="dt">popup =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Slavic&quot;</span>, <span class="st">&quot;Slavic&quot;</span>, <span class="st">&quot;Slavic&quot;</span>))

<span class="kw">map.feature</span>(df$lang, df$feature, df$popup,
            <span class="dt">tile =</span> <span class="kw">c</span>(<span class="st">&quot;OpenStreetMap.BlackAndWhite&quot;</span>, <span class="st">&quot;Thunderforest.OpenCycleMap&quot;</span>),
            <span class="dt">tile.name =</span> <span class="kw">c</span>(<span class="st">&quot;b &amp; w&quot;</span>, <span class="st">&quot;colored&quot;</span>))</code></pre></div>
<p>It is possible to combine the tiles’ control box with the features’ control box.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">lang =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Russian&quot;</span>, <span class="st">&quot;Bulgarian&quot;</span>),
                 <span class="dt">feature =</span> <span class="kw">c</span>(<span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;polysynthetic&quot;</span>, <span class="st">&quot;fusion&quot;</span>, <span class="st">&quot;fusion&quot;</span>, <span class="st">&quot;fusion&quot;</span>),
                 <span class="dt">popup =</span> <span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Slavic&quot;</span>, <span class="st">&quot;Slavic&quot;</span>, <span class="st">&quot;Slavic&quot;</span>))

<span class="kw">map.feature</span>(df$lang, df$feature, df$popup,
            <span class="dt">tile =</span> <span class="kw">c</span>(<span class="st">&quot;OpenStreetMap.BlackAndWhite&quot;</span>, <span class="st">&quot;Thunderforest.OpenCycleMap&quot;</span>),
            <span class="dt">control =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="add-a-minimap-to-a-map" class="section level3">
<h3>3.13 Add a minimap to a map</h3>
<p>It is possible to add a minimap to a map.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Russian&quot;</span>),
            <span class="dt">minimap =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>You can control its appearance (by setting the <code>minimap</code> argument to TRUE or FALSE), its position (by using the values “topright”, “bottomright”, “bottomleft” or “topleft” of the <code>minimap.position</code> argument) and its height and width (with the arguments <code>minimap.height</code> and <code>minimap.width</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Russian&quot;</span>),
            <span class="dt">minimap =</span> <span class="ot">TRUE</span>,
            <span class="dt">minimap.position =</span> <span class="st">&quot;topright&quot;</span>,
            <span class="dt">minimap.height =</span> <span class="dv">100</span>,
            <span class="dt">minimap.width =</span> <span class="dv">100</span>)</code></pre></div>
</div>
<div id="add-minicharts-instead-of-points" class="section level3">
<h3>3.14 Add minicharts instead of points</h3>
<p>This part is created using the beutifull <a href="https://CRAN.R-project.org/package=leaflet.minicharts"><code>leaflet.minicharts</code> library</a>. The argument <code>minichart</code> allows you to add piechart or barplot instead of standard point markers. In this part I will use a build in data set <code>ejective_and_n_consonants</code> that contains 19 languages from <a href="http://www.lapsyd.ddl.ish-lyon.cnrs.fr/lapsyd/">UPSyD database</a>. Here is an example of barplot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="dt">languages =</span> ejective_and_n_consonants$language,
            <span class="dt">minichart.data =</span> ejective_and_n_consonants[, <span class="kw">c</span>(<span class="st">&quot;vowels&quot;</span>, <span class="st">&quot;consonants&quot;</span>)],
            <span class="dt">minichart =</span> <span class="st">&quot;bar&quot;</span>)</code></pre></div>
<p>Here is an example of piechart:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="dt">languages =</span> ejective_and_n_consonants$language,
            <span class="dt">minichart.data =</span> ejective_and_n_consonants[, <span class="kw">c</span>(<span class="st">&quot;vowels&quot;</span>, <span class="st">&quot;consonants&quot;</span>)],
            <span class="dt">minichart =</span> <span class="st">&quot;pie&quot;</span>)</code></pre></div>
<p>Colors and opacity could be changed, legend moved:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="dt">languages =</span> ejective_and_n_consonants$language,
            <span class="dt">minichart.data =</span> ejective_and_n_consonants[, <span class="kw">c</span>(<span class="st">&quot;vowels&quot;</span>, <span class="st">&quot;consonants&quot;</span>)],
            <span class="dt">minichart =</span> <span class="st">&quot;bar&quot;</span>,
            <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">&quot;yellowgreen&quot;</span>, <span class="st">&quot;navy&quot;</span>),
            <span class="dt">opacity =</span> <span class="fl">0.7</span>,
            <span class="dt">label =</span> ejective_and_n_consonants$language,
            <span class="dt">legend.position =</span> <span class="st">&quot;topleft&quot;</span>)</code></pre></div>
<p>It is possible to add values using argument <code>minichart.labels</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="dt">languages =</span> ejective_and_n_consonants$language,
            <span class="dt">minichart.data =</span> ejective_and_n_consonants[, <span class="kw">c</span>(<span class="st">&quot;vowels&quot;</span>, <span class="st">&quot;consonants&quot;</span>)],
            <span class="dt">minichart =</span> <span class="st">&quot;pie&quot;</span>,
            <span class="dt">minichart.labels =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="add-a-rectangle-to-a-map" class="section level3">
<h3>3.15 Add a rectangle to a map</h3>
<p>It is possible to highlight some part of your map with a rectangle. You need to provide a latitude and longitude of the diagonal (<code>rectangle.lat</code> and <code>rectangel.lng</code>) and color of the rectangle (<code>rectangle.color</code>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            circassian$language,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">rectangle.lng =</span> <span class="kw">c</span>(<span class="fl">42.7</span>, <span class="dv">45</span>),
            <span class="dt">rectangle.lat =</span> <span class="kw">c</span>(<span class="fl">42.7</span>, <span class="fl">44.4</span>),
            <span class="dt">rectangle.color =</span> <span class="st">&quot;green&quot;</span>)</code></pre></div>
</div>
<div id="add-a-density-contour-plot-to-a-map" class="section level3">
<h3>3.16 Add a density contour plot to a map</h3>
<p>Sometimes it is easier to look at a density contour plot. It can be created using <code>density.estimation</code> argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">density.estimation =</span> circassian$language)</code></pre></div>
<p>Density estimation plot can be colored by :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$dialect,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">density.estimation =</span> circassian$language)</code></pre></div>
<p>It is possible to remove points and display only the kernal density estimation plot, using the <code>density.points</code> argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">density.estimation =</span> circassian$language,
            <span class="dt">density.points =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>It is possible to change kernal density estimation plot opacity using the<code>density.estimation.opacity</code> argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">density.estimation =</span> circassian$language,
            <span class="dt">density.estimation.opacity =</span> <span class="fl">0.9</span>)</code></pre></div>
<p>Since this type of visualisation is based on the kernal density estimation, there are parameters <code>density.longitude.width</code> and <code>density.latitude.width</code> that increase/decrease area:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$language,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">density.estimation =</span> <span class="st">&quot;Circassian&quot;</span>,
            <span class="dt">density.longitude.width =</span> <span class="fl">0.3</span>,
            <span class="dt">density.latitude.width =</span> <span class="fl">0.3</span>, 
            <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">&quot;darkgreen&quot;</span>, <span class="st">&quot;blue&quot;</span>))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$language,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">density.estimation =</span> <span class="st">&quot;Circassian&quot;</span>,
            <span class="dt">density.longitude.width =</span> <span class="fl">0.7</span>,
            <span class="dt">density.latitude.width =</span> <span class="fl">0.7</span>, 
            <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">&quot;darkgreen&quot;</span>, <span class="st">&quot;blue&quot;</span>))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(circassian$language,
            <span class="dt">features =</span> circassian$language,
            <span class="dt">longitude =</span> circassian$longitude,
            <span class="dt">latitude =</span> circassian$latitude,
            <span class="dt">density.estimation =</span> <span class="st">&quot;Circassian&quot;</span>,
            <span class="dt">density.longitude.width =</span> <span class="fl">1.3</span>,
            <span class="dt">density.latitude.width =</span> <span class="fl">0.9</span>, 
            <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">&quot;darkgreen&quot;</span>, <span class="st">&quot;blue&quot;</span>))</code></pre></div>
<p>It is important to note, that this type of visualization have some shortcomings. The kernel density estimation is calculated without any adjustment, so longitude and latitude values used as a values in Cartesian coordinate system. To reduce consequences of that solution it is better to use a different coordinate projection. That allows not to treat Earth as a flat object.</p>
</div>
</div>
<div id="typological-databases-api" class="section level2">
<h2>4. Typological databases API</h2>
<p><code>lingtypology</code> provides an ability to download data from these typological databases</p>
<ul>
<li><a href="http://wals.info/">World Atlas of Language Structures</a></li>
<li><a href="https://github.com/autotyp/autotyp-data#the-autotyp-database">AUTOTYP</a></li>
<li><a href="http://phoible.org/">PHOIBLE</a></li>
<li><a href="http://afbo.info">Affix Borrowing database</a></li>
<li><a href="http://sails.clld.org/">South American Indigenous Language Structures</a></li>
<li><a href="https://abvd.shh.mpg.de/austronesian/">Austronesian Basic Vocabulary Database</a></li>
</ul>
<p>All database function names have identical structure: <strong>database_name.feature</strong>. All functions have as first argument <code>feature</code>. All functions create dataframe with column <code>language</code> that can be used in <code>map.feature()</code> function. It should be noted that all functions cut out the data that can’t be maped, so if you want to prevent functions from this behaviour set argument <code>na.rm</code> to <code>FALSE</code>.</p>
<div id="wals" class="section level3">
<h3>4.1 WALS</h3>
<p>The names of the WALS features can be typed in a lower case. This function preserves coordinates from WALS, so you can map coordinates from the WALS or use coordinates from <code>lingtypology</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">wals.feature</span>(<span class="kw">c</span>(<span class="st">&quot;1a&quot;</span>, <span class="st">&quot;20a&quot;</span>))
<span class="kw">head</span>(df)
<span class="kw">map.feature</span>(df$language,
            <span class="dt">features =</span> df$<span class="st">`</span><span class="dt">1a</span><span class="st">`</span>,
            <span class="dt">latitude =</span> df$latitude,
            <span class="dt">longitude =</span> df$longitude,
            <span class="dt">label =</span> df$language,
            <span class="dt">title =</span> <span class="st">&quot;Consonant Inventories&quot;</span>)</code></pre></div>
</div>
<div id="autotyp" class="section level3">
<h3>4.2 AUTOTYP</h3>
<p>The AUTOTYP features are listed on <a href="https://github.com/autotyp/autotyp-data#the-autotyp-database">the GitHub page</a>. You can use more human way with spaces.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">autotyp.feature</span>(<span class="kw">c</span>(<span class="st">'Gender'</span>, <span class="st">'Numeral classifiers'</span>))
<span class="kw">head</span>(df)
<span class="kw">map.feature</span>(df$language,
            <span class="dt">features =</span> df$NumClass.Presence,
            <span class="dt">label =</span> df$language,
            <span class="dt">title =</span> <span class="st">&quot;Presence of Numeral Classifiers&quot;</span>)</code></pre></div>
</div>
<div id="phoible" class="section level3">
<h3>4.3 PHOIBLE</h3>
<p>I used only four features from PHOIBLE: the number of phonemes, the number of consonants, the number of tones and the number of vowels. If you need only a set of them, just specify it in the <code>features</code> argument. Since there is a lot of doubling information in the PHOIBLE database, there is an argument <code>source</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">phoible.feature</span>(<span class="dt">source =</span> <span class="st">&quot;UPSID&quot;</span>)
<span class="kw">head</span>(df)
<span class="kw">map.feature</span>(df$language,
            <span class="dt">features =</span> df$phonemes,
            <span class="dt">label =</span> df$language,
            <span class="dt">title =</span> <span class="st">&quot;Number of Phonemes&quot;</span>)</code></pre></div>
</div>
<div id="afbo" class="section level3">
<h3>4.4 AfBo</h3>
<p>The AfBo database has a lot of features that distinguish affix functions, but again you can use a bare function without any arguments to download the whole database. There will be no difference in time, since this function downloads the whole database to your PC. The main destinction is that this database provides recipient and donor languages, so other column names should be used.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">afbo.feature</span>(<span class="kw">c</span>(<span class="st">&quot;adjectivizer&quot;</span>, <span class="st">&quot;adverbializer&quot;</span>))
<span class="kw">head</span>(df)
<span class="kw">map.feature</span>(df$Recipient.name,
            <span class="dt">features =</span> df$adjectivizer,
            <span class="dt">label =</span> df$Recipient.name,
            <span class="dt">title =</span> <span class="st">&quot;Borrowed adjectivizer affixes&quot;</span>)</code></pre></div>
</div>
<div id="sails" class="section level3">
<h3>4.5 SAILS</h3>
<p>The SAILS database provide a lot of <a href="http://sails.clld.org/parameters">features</a>, so the function work with their ids:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">sails.feature</span>(<span class="dt">features =</span> <span class="st">&quot;ics10&quot;</span>)
<span class="kw">head</span>(df)
<span class="kw">map.feature</span>(df$language,
            <span class="dt">features =</span> df$ics10_description,
            <span class="dt">longitude =</span> df$longitude,
            <span class="dt">latitude =</span> df$latitude,
            <span class="dt">label =</span> df$language,
            <span class="dt">title =</span> <span class="st">&quot;Are there numeral classifiers?&quot;</span>)</code></pre></div>
</div>
<div id="abvd" class="section level3">
<h3>4.6 ABVD</h3>
<p>The ABVD database is a lexical database, so it is different from clld databases. First of all, ABVD has its own language classification ids. The information about the same language from different sources can be received from these database different ids. So I select several languages and map them coloring by word with the meaning ‘hand’.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">abvd.feature</span>(<span class="dv">50</span>:<span class="dv">55</span>)
<span class="kw">head</span>(df)
new_df &lt;-<span class="st"> </span>df[df$word ==<span class="st"> &quot;hand&quot;</span>,]
<span class="kw">map.feature</span>(new_df$language,
            <span class="dt">features =</span> new_df$item,
            <span class="dt">label =</span> new_df$language)</code></pre></div>
</div>
</div>
<div id="dplyr-integration" class="section level2">
<h2>5. <code>dplyr</code> integration</h2>
<p>It is possible to use <code>dplyr</code> functions and pipes with <code>lingtypology</code>. It is widely used, so I will give some examples, how to use it with the<code>lingtypology</code> package. Using query “list of languages csv” I found Vincent Garnier’s <a href="https://github.com/forxer/languages-list">languages-list repository</a>. Let’s download and map all the languages from that set. First download the data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://goo.gl/GgscBE&quot;</span>)
<span class="kw">tail</span>(new_data)</code></pre></div>
<p>As we see, some values of the <code>Language.name</code> variable contain more than one language name. Some of the names probably have different names in our database. Imagine that we want to map all languages from Africa. So that the following examples work correctly, use <code>library(dplyr)</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
new_data %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Language.name =</span> <span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot; &quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>, Language.name)) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.glottolog</span>(Language.name) ==<span class="st"> </span><span class="ot">TRUE</span>) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">area.lang</span>(Language.name) ==<span class="st"> &quot;Africa&quot;</span>) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Language.name) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">map.feature</span>()</code></pre></div>
<p>We start with a dataframe, here a <code>new_data</code>. First we remove spaces at the end of each string. Then we check, whether the language names are in the glottolog database. Then we select only rows that contain languages of Africa. Then we select the <code>Language.name</code> variable. And the last line maps all selected languages.</p>
<p>By default, the values that came from the pipe are treated as the first argument of a function. But when there are some additional arguments, point sign specify what exact position should be piped to. Let’s produce the same map with a minimap.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_data %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Language.name =</span> <span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot; &quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>, Language.name)) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.glottolog</span>(Language.name) ==<span class="st"> </span><span class="ot">TRUE</span>) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">area.lang</span>(Language.name) ==<span class="st"> &quot;Africa&quot;</span>) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Language.name) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">map.feature</span>(., <span class="dt">minimap =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="citing-lingtyplogy" class="section level2">
<h2>6. Citing <code>lingtyplogy</code></h2>
<p>It is important to cite R and R packages when you use them. For this purpose use the <code>citation</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">citation</span>(<span class="st">&quot;lingtypology&quot;</span>)</code></pre></div>
<pre><code>## 
## Moroz G (2017). _lingtypology: easy mapping for Linguistic
## Typology_. &lt;URL: https://CRAN.R-project.org/package=lingtypology&gt;.
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {lingtypology: easy mapping for Linguistic Typology},
##     author = {George Moroz},
##     year = {2017},
##     url = {https://CRAN.R-project.org/package=lingtypology},
##   }</code></pre>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
